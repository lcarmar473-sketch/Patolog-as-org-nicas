<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Primeros Auxilios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Componente para que los iconos carguen correctamente en el navegador
        const Icon = ({ name, className }) => {
            useEffect(() => {
                lucide.createIcons();
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('learning');
            const [selectedPathology, setSelectedPathology] = useState(null);
            const [quizStarted, setQuizStarted] = useState(false);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [score, setScore] = useState(0);
            const [showResult, setShowResult] = useState(false);
            const [feedback, setFeedback] = useState(null);

            const pathologies = [
                {
                    id: 'cardio',
                    title: 'Urgencias Cardiovasculares',
                    subtitle: 'Infarto Agudo de Miocardio (IAM)',
                    icon: 'heart',
                    color: 'border-red-500',
                    bgColor: 'bg-red-50',
                    textColor: 'text-red-500',
                    symptoms: [
                        'Dolor opresivo retroesternal (centro del pecho).',
                        'Irradiación a brazo izquierdo, mandíbula o espalda.',
                        'Sudoración fría (diaforesis) y náuseas.',
                        'Sensación de muerte inminente.'
                    ],
                    actions: [
                        { step: 'Reposo', text: 'Sentar a la víctima con la espalda apoyada.' },
                        { step: 'Llamada 112', text: 'Indicar sospecha de síndrome coronario agudo.' },
                        { step: 'Confort', text: 'Aflojar prendas que opriman el cuello.' },
                        { step: 'Vigilancia', text: 'Controlar pulso. Si hay PCR, iniciar RCP.' }
                    ]
                },
                {
                    id: 'neuro',
                    title: 'Urgencias Neurológicas',
                    subtitle: 'Ictus / ACV',
                    icon: 'brain',
                    color: 'border-purple-500',
                    bgColor: 'bg-purple-50',
                    textColor: 'text-purple-500',
                    symptoms: [
                        'Pérdida de fuerza súbita en un lado del cuerpo.',
                        'Desviación de la comisura bucal (boca torcida).',
                        'Dificultad severa para hablar.',
                        'Dolor de cabeza explosivo.'
                    ],
                    actions: [
                        { step: 'Evaluación FAST', text: 'Cara, brazos y habla inmediatamente.' },
                        { step: 'Hora de Inicio', text: 'Anotar cuándo empezó el síntoma.' },
                        { step: 'Posición', text: 'Cabeza elevada 30º si está consciente.' },
                        { step: 'Traslado', text: 'Aviso urgente para activar Código Ictus.' }
                    ]
                }
            ];

            const quiz = [
                {
                    case: "Hombre de 55 años con dolor intenso en el pecho. Siente 'fuego' que sube a su mandíbula.",
                    options: ["Elevar piernas", "Posición semisentado y llamar 112", "Caminar", "Inhalador"],
                    correct: 1,
                    tip: "El reposo total reduce la carga del corazón."
                }
            ];

            const handleAnswer = (idx) => {
                if (feedback !== null) return;
                const isCorrect = idx === quiz[currentQuestion].correct;
                if (isCorrect) setScore(score + 1);
                setFeedback(isCorrect ? 'correct' : 'incorrect');
                setTimeout(() => {
                    setFeedback(null);
                    if (currentQuestion + 1 < quiz.length) setCurrentQuestion(currentQuestion + 1);
                    else setShowResult(true);
                }, 2000);
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans pb-12">
                    <header className="bg-indigo-700 text-white p-8 shadow-lg">
                        <div className="max-w-4xl mx-auto flex justify-between items-center">
                            <div>
                                <h1 className="text-2xl font-black flex items-center gap-2">
                                    <Icon name="activity" className="w-8 h-8 text-indigo-300" />
                                    SIMULADOR ORGÁNICO
                                </h1>
                                <p className="text-indigo-100 text-xs font-bold uppercase tracking-widest">RA2.g - Primeros Auxilios</p>
                            </div>
                            <div className="flex bg-indigo-800/50 p-1 rounded-xl">
                                <button onClick={() => setActiveTab('learning')} className={`px-4 py-2 rounded-lg text-sm font-bold ${activeTab === 'learning' ? 'bg-white text-indigo-600' : 'text-indigo-200'}`}>Protocolos</button>
                                <button onClick={() => setActiveTab('quiz')} className={`px-4 py-2 rounded-lg text-sm font-bold ${activeTab === 'quiz' ? 'bg-white text-indigo-600' : 'text-indigo-200'}`}>Simulador</button>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-5xl mx-auto px-4 mt-8">
                        {activeTab === 'learning' ? (
                            <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                                <div className="lg:col-span-4 space-y-3">
                                    {pathologies.map(p => (
                                        <button key={p.id} onClick={() => setSelectedPathology(p)} className={`w-full text-left p-4 rounded-2xl border-2 bg-white flex items-center gap-4 ${selectedPathology?.id === p.id ? 'border-indigo-500 ring-2 ring-indigo-50' : 'border-transparent shadow-sm'}`}>
                                            <div className={`p-2 rounded-xl ${p.bgColor} ${p.textColor}`}><Icon name={p.icon} className="w-6 h-6" /></div>
                                            <div><h3 className="font-black text-slate-800 text-sm">{p.title}</h3></div>
                                        </button>
                                    ))}
                                </div>
                                <div className="lg:col-span-8">
                                    {selectedPathology ? (
                                        <div className="bg-white rounded-3xl shadow-xl p-8 border-t-8 border-indigo-500">
                                            <h2 className="text-2xl font-black mb-6">{selectedPathology.title}</h2>
                                            <div className="grid md:grid-cols-2 gap-8">
                                                <div>
                                                    <h4 className="font-bold text-slate-800 mb-4 border-b pb-2 flex items-center gap-2"><Icon name="alert-circle" className="w-4 h-4 text-amber-500" /> Síntomas</h4>
                                                    <ul className="text-sm space-y-2">{selectedPathology.symptoms.map((s,i) => <li key={i} className="flex gap-2"><span>•</span>{s}</li>)}</ul>
                                                </div>
                                                <div>
                                                    <h4 className="font-bold text-slate-800 mb-4 border-b pb-2 flex items-center gap-2"><Icon name="stethoscope" className="w-4 h-4 text-indigo-500" /> Actuación</h4>
                                                    <div className="space-y-4">{selectedPathology.actions.map((act, i) => <div key={i} className="text-xs"><strong>{act.step}:</strong> {act.text}</div>)}</div>
                                                </div>
                                            </div>
                                        </div>
                                    ) : <div className="p-12 text-center text-slate-400 border-2 border-dashed rounded-3xl">Seleccione una patología</div>}
                                </div>
                            </div>
                        ) : (
                            <div className="max-w-2xl mx-auto bg-white p-8 rounded-3xl shadow-xl">
                                {!quizStarted ? (
                                    <div className="text-center">
                                        <Icon name="zap" className="w-12 h-12 mx-auto text-indigo-500 mb-4" />
                                        <h2 className="text-xl font-black mb-4">Evaluación de Casos</h2>
                                        <button onClick={() => setQuizStarted(true)} className="bg-indigo-600 text-white px-8 py-3 rounded-xl font-bold">Comenzar</button>
                                    </div>
                                ) : (
                                    <div>
                                        <div className="bg-slate-900 text-white p-6 rounded-2xl mb-6">"{quiz[currentQuestion].case}"</div>
                                        <div className="grid gap-3">
                                            {quiz[currentQuestion].options.map((opt, i) => (
                                                <button key={i} onClick={() => handleAnswer(i)} className="p-4 border-2 rounded-xl text-left font-bold hover:bg-indigo-50">{opt}</button>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
